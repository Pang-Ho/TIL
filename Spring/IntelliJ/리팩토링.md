# 리팩토링



## IT서비스에서는 리팩토링이 아주 중요해진 이유

* 서비스 오픈 후 변화의 폭이 크다.
  * 절대 바뀌지 않는다는 정책이 바뀌어버림
    * 국내 전용 서비스가 글로벌 서비스로 진화
    * PC전용 서비스가 모바일, 앱도 지원
  * 중간에 추가적인 레이어가 하나씩 더 들어가는 경우 흔함
  * 기존 구조를 뒤 흔드는 기능 추가를 하는 경우도 많음
* 1번의 큰 변화가 프로젝트를 1.5배 이상 복잡하게 만든다
* 이 복잡성을 줄여주는 것이 바로 리팩토링



## 리팩토링의 주요 포인트

* 일정에 맞추느라 품질이 다소 떨어졌던 부분
* 서비스에서 핵심적이면서 사용자 경험에 큰 영향을 끼치는 부분
* 복잡도가 높고 향후 기능 추가, 변경 가능성이 높은 부분
* 타 서비스에서도 활용할만한 공통적인 기능
  * 외부 라이브러리나 시스템으로 도출
* 테스트코드 등도 가능
* 도전적인 부분
  * 새로운 기술로 성능 향상이나 유지보수성 향상이 가능한 부분
  * (기존도 나쁘지 않지만) 더 좋은 구성 방법이 생각나는 부분







## 지역 변수 제거

```java
@Transactional
public CreateDeveloper.Response createDeveloper(
  CreateDeveloper.Request request
) {
    validateCreateDeveloperRequest(request);
    
  	//Developer developer = createDeveloperFromRequest(request);
    //developerRepository.save(developer);
    //return CreateDeveloper.Response.fromEntity(developer);
    
  	//위 developer는...
    //네이밍 된 변수 특정의미를 담은 지역변수가 아닌 일회성 변수인 경우에 웬만하면 변수로 만들지 말자.
    return CreateDeveloper.Response.fromEntity(
      developerRepository.save(createDeveloperFromRequest(request))
    );
    }
```