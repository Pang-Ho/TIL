# 트랜잭션



## ACID

* Atomic
  * 계좌에서 돈을 송금했을 때 오류로 인해 내 계좌에서 돈이 빠져나갔는데 상대방 계좌에는 돈이 안들어왔을 때 이런 오류가 생기면 아예 이 과정을 무효화

* Consistency
  * 모든 DB 테이블의 자료들은 모든 규칙에 맞춰있어야하고, 트랜잭션이 완료되는 시점에서는 일관성이 맞춰있어야 한다.
  * 커밋이 끝나는 지점에 DB가 정리가 되어있어야한다

* Isolation
  * 까다로운 부분, 성능과 trade off 관계
  * DB를 아무나 쓸 수 있다면 성능은 좋아지지만, 정확성이 떨어짐
  * mysql에서는 Isolation 레벨이 여러개가 있는데, 기본적인 Isolation 레벨이 리피터블 리드임
    * 한 시점에는 한 트랜잭션만 처리할 수 있다.
    * 그렇게 되면 대량처리가 불가능해지는 경우다.

* Durability
  * 커밋이 되는 시점에 커밋이 된 이력이 있어야 한다.
  * DB에 데이터가 쓰일 때 로그부터 적고 디스크에 데이터가 쓰임
    * 디스크 오류가 나면, 로그는 남지만 디스크에 반영이 안되는 경우가 있다.