# 자바, 스프링, 스프링부트



Java : 객체지향적 프로그래밍 언어

* JVM이라는 가상 머신에 올라가서 구동이 되기 때문에 여러 os, 기계 등에서 사용되기 쉬워서 쓰임
* 한글만 안다고 책을 쓸 수 없는 것 처럼, 자바만 안다고 프로그램을 만들 수 없음



Spring Framework : 기업용 어플리케이션을 만드는데 사용 가능한 오픈소스 프레임워크

* 자바라는 언어를 이용해서 어플리케이션을 만들기 위해 활용되는 프레임워크



Spring boot : 스프링 기반으로 자주 사용되는 설정으로 손쉽게 개발할 수 있게해주는 상위 프레임워크

* 스프링보다 더 편리한 프레임워크
* 웹 어플리케이션 서버(톰캣 등) 내장
* 자동 설정, 설정 표준화
* 원한다면 모두 마음대로 설정할 수 있음



## Spring Framework가 생긴 이유

* 스프링이 나오기 전

  * 스프링이 나오기 전에는 자바로 엔터프라이즈 어플리케이션을 개발하는 가장 일반적인 방법은 EJB를 사용하는 것이었다.
  * EJB에는 불필요한 메서드를 구현하거나 배포가 불편한 단점들이 있었기 때문에 사용하기 어려웠었다.

* 스프링을 사용하는 이유

  1. 단순화된 단위 테스팅
     * EJB는 단위테스트가 어렵다.
     * 스프링 프레임워크는 의존성 주입(DI)라는 개념을 도입해서 단위 테스트가 간소화 되었다.
  2. 복잡한 코드의 감소
     * 자바로 데이터베이스 연동을 하는 과정을 SQL 마다 작성해야 했었다.
     * 하지만 스프링 프레임워크의 Spring JDBC를 사용하면 단순하게 사용할 수 있다.
     * 모든 메서드에서 예외처리를 구현하는 대신, 중앙 집중식 예외 처리를 수행하고 관점 지향 프로그래밍(AOP)를 사용해 주입할 수 있다고 한다.
  3. 아키텍처의 유연성
     * 사용자가 어떠한 기능을 완성하는데 필요한 모듈을 다양하게 선택할 수 있다.
  4. 변화하는 시대를 선도

  

## 스프링 프레임워크 핵심기술

![image-20220125230329022](../../md-images/image-20220125230329022.png)

* 스프링이 동작하는 방법

  * Core(DI, IoC) Dependency Injection / Inversion of Control
    * 스프링의 근간, 내가 만든 클래스를 스프링이 직접 관리하여 어플리케이션을 동작하게 한다.
  * AOP(Aspect Oriented Programming)
    * 공통적인 코드를 프레임워크 레벨에서 지원해주는 방법
  * Validation, Data binding
    * 검증 그리고 외부에서 받은 데이터를 담아내는 방법
  * Resource
    * 스프링 내부에서 설정이 들어있는 파일들에 접근하는 동작 원리
  * SpEL
    * 짧은 표현식을 통해 필요한 데이터나 설정 값을 얻어 올 수 있게 하는 특별한 형태의 표현식에 가까운 간편한 언어
  * Null-Safety
    * 자바 사용할 때 Null 관리하는 것이 가장 어려움

  

* 스프링의 디자인 철학
  * 모든 기능에서 다양한 가능성(다양한 모듈)을 사용 가능, 심지어 외부 모듈을 활용 가능
    * 너무 높은 자유도 때문에 오히려 스프링을 어렵게 하는 요소일 수 있음
  * 유연하게 계속 추가 개발중인 프레임워크이다.
  * 이전 버전과의 호환성이 강력하다.
    * 그러나 너무 많은 레거시(아주 예전부터 쓰이던 레거시들도 호환이 되기 때문에) 코드의 복잡성이 높아진다
  * 스프링은 API 디자인을 섬세하게 노력한다
    * 스프링 코드 자체가 하나의 좋은 참고 소스이기 때문에 스프링 코드를 보면서 배울려 하는 것도 아주 좋다.
  * 높은 코드 품질을 유지하려 함
    * 스프링 프로젝트 깃허브는 아주 좋은 참고 소스이자 PR과 이슈관리도 좋은 프로세스 참고용이다.
  * 한 마디로 높은 자유도를 주고 계속 발전하는 고품질의 다양성이 있는 프로젝트이다.



### IoC(Inversion of Control), DI(Dependency Injection)

* IoC나 DI는 레고와 같다.
  * 스프링 프레임워크란 바닥에서 원하는 기능을 조립하면 된다.



### javaBean / Bean이란?

* 자바에서의 자바 빈이란?
  * 데이터를 저장하기 위한 구조체로 자바 빈 규약이라는 것을 따르는 단순한 구조체 
  * private 프로퍼티와 getter/setter로만 데이터를 접근한다.
  * 인수(argument)가 없는 기본 생성자가 있다.

~~~java
//예시
public class JavaBean {
  //직접 가져오지 못하게 private으로 설정하고
	private String id;
	private Integer count;

	public JavaBean(){}

  //getter/setter로 프로퍼티를 설정하고 쓸 수 있도록
	public String getId() {
		return id;
	}

	public void setId(String id) {
		this.id = id;
	}

	public Integer getCount() {
		return count;
	}

	public void setCount(Integer count) {
		this.count = count;
	}
}
~~~



* 스프링에서의 Bean이란?

  * 스프링 IoC 컨테이너에 의해 생성되고 관리되는 객체
  * 스프링 프레임워크에 올려서 사용할 클래스들을 IoC Container로 가져온 클래스 인스턴스들인데, **Spring Application Context**라는 곳에서 스프링의 설정들을 입혀주고(입혀준 상태가 Bean) 공통된 처리를 한다
  * 어떤 클래스는 빈으로 등록하는 것이 좋고, 어떤 클래스는 빈으로 등록할 필요가 없을 수 있다.

  ![image-20220128171747891](../../md-images/image-20220128171747891.png)

  

* Spring Application Context : 스프링 컨테이너의 중요한 역할

  * Class들에 설정을 입히고, 공통된 처리를 함

* 스프링 컨테이너 : ApplicationContext 인터페이스를 통해 제공되는 스프링 컨테이너는 Bean 객체의 생성 및 Bean들의 조립(상호 의존성 관리)을 담당합니다.
  * Bean의 등록
    * 과거에는 xml로 설정을 따로 관리하여 등록(불편)
    * 현재는 annotation 기반으로 Bean 등록
      * @Bean, @Controller, @Service
    * Bean 등록 시 정보
      * Class 경로
      * Bean의 이름
        * 기본적으로는 원 Class 이름에서 첫 문자만 소문자로 변경 => userDAO
      * Scope : **Bean을 생성하는 규칙** / 보통 프로퍼티를 가지고 있는데, 그 값을 변경하지 않는 경우가 대부분이기 때문에 singleton으로 한 번 만들고 건드리지 않는다.
        * singleton : 컨테이너에 단일로 생성 //기본값
        * prototype : 작업 시마다 프로퍼티를 변경하고 싶어서 Bean을 새로 생성하고 싶을 경우
        * request : http 요청마다 프로퍼티를 변경해서 새롭게 Bean을 생성하고 싶은 경우
    * Bean LifeCycle callbak
      * callback : 어떤 이벤트가 발생하는 경우 호출되는 메서드
      * lifecycle callback
        * **Bean을 생성하고 초기화하고 파괴**하는 등 특정 시점에 호출되도록 정의된 함수
      * 주로 많이 사용되는 콜백
        * @PostConstruct : 빈 생성 시점에 필요한 작업을 수행
        * @PreDestroy : 빈 파괴(주로 어플리케이션 종료) 시점에 필요한 작업을 수행



### 관점 지향 프로그래밍 - AOP(Aspect Oriented Programming)

* 특정한 함수 호출 전이나 후에 뭐낙 공통적인 처리가 필요하다면? => AOP
  * 로깅
  * 트랜잭션
  * 인증
* OOP