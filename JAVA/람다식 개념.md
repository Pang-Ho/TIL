# 람다



## 람다식

자바는 OOP언어이다.
JDK 1.8부터 함수형 언어의 기능을 추가하였다.

함수형 언어로는 Haskell Scala 등이 있고, 빅 데이터를 처리하기 위해 함수형 언어가 필요하다.

* 람다식이란? 
  함수(메서드)를 간단한 식으로 표현하는 방법
  메서드 명이 없기 때문에 **익명함수**라고도 불린다.
  * 함수? 메서드?
    * 근본적으로 동일한 용어
    * 메서드는 객체지향 개념에서 쓰이는 용어
    * 함수는 클래스에 독립적, 메서드는 클래에 종속적

~~~java
//함수
int max(int a, int b) {
  return a>b?a:b;
}
~~~

~~~java
//람다식
(a, b) -> a > b ? a : b
~~~

* 람다식을 만드는 방법
  1. 기존 메서드에서 반환 타입과 이름을 지우고 화살표를 중간에 넣는다.
  2. 반환 값이 있는 경우, 식이나 값만 적고 return문 생략가능, 끝에 ';' 안 붙인다.
  3. 파라미터의 타입이 추론 가능하면 생략 가능(대부분의 경우 생략 가능)

~~~java
int max(int a, int b) {return a>b?a:b;}
//메서드 -> 람다식
(int a, int b) -> {return a>b ? a:b;}
(int a, int b) -> a>b ? a:b
(a, b) -> a>b ? a:b
~~~

* 람다식 작성하기 - 주의사항

  1. 매개변수가 하나인 경우 괄호 생략가능(타입이 없을 때만)

     ~~~java
     (a) -> a*a  					a-> a*a //ok
     (int a) -> a*a   int a -> a*a //error
     ~~~

  2. 블록 안의 문장이 하나뿐 일 때, 괄호 생략 가능(동시에 ';' 도 생략)

     ~~~java
     (int i) -> {System.out.println(i);}
     (int i) -> System.out.println(i)
     ~~~



* 람다식은 익명함수? 익명 객체!

  ~~~java
  (a, b) -> a>b ? a:b
  //람다식은 원래 밑 처럼 써야한다. 익명 객체!
  new Object() {
    int max(int a, int b) {
      return a>b ? a:b;
    }
  }
  ~~~

* 그럼 람다식(익명 객체)을 다루기 위한 참조 변수 타입이 무엇일까?

  ~~~java
  //익명 객체를 참조
  Object obj = new Object() {
    int max(int a, int b) {
      return a>b ? a:b;
    }
  }
  
  //그러나 위 익명 객체의 메서드 max()를 쓰기 위해서 밑 처럼 참조하면 에러가 난다.
  //Object 클래스에는 max() 메서드가 없기 때문에 호출이 불가하다!!  
  int value = obj.max(3, 5); //error
  ~~~



## 함수형 인터페이스

**단 하나의 추상 메서드**만 선언된 인터페이스

~~~java
interface MyFunction {
  public abstract int max(int a, int b);
}
~~~

함수형 인터페이스를 추가로 넣어주면, 람다식을 객체에 넣어서 호출할 수 있다.

~~~java
public class Test {
    public static void main(String[] args) {
        MyFunction obj = new MyFunction() {
            public int max(int a, int b) { //접근 제어자는 좁게 바꿀 수 없다. public을 붙여야 한다.
                return a>b ? a:b;
            }
        };
      
        obj.max(2, 3);//함수형 인터페이스 덕분에 max메서드를 호출할 수 있음
    }
}

interface MyFunction {
    public abstract int max(int a, int b); //인터페이스의 규칙 public이면서 abstract
  //int max(int a, int b); //public과 abstract 생략 가능
}
~~~



~~~java
public class Test {
    public static void main(String[] args) {
			MyFunction func = (a, b) -> a>b ? a:b;

      func.max(3, 5);
    }
}

interface MyFunction {
    public abstract int max(int a, int b);
}
~~~



* 예제

  Comparator는 함수형 인터페이스다.
  밑 처럼 compare() 메서드를 구체화해야 하는데, 람다식으로 사용하면 아주 간편하게 쓸 수 있다.

  ~~~java
  List<String> list = Arrays.asList("abc", "aaa", "bbb", "ddd", "aaa");
  
  List.sort(list, new Comparator<String>() {
                    public int compare(String s1, String s2) {
                      return s2.compareTo(s1);
                    }
                  });
  ~~~

  ~~~java
  List.sort(list, (s1, s2) -> s2.compareTo(s1));
  ~~~

  